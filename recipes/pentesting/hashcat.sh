#!/usr/bin/env bash

function run {
  VERSION="6.2.5"
  URL="https://hashcat.net/files/hashcat-$VERSION.7z"
  wget $URL -O "$LOCAL_OPT/hashcat.7z"
  rm -rf $LOCAL_OPT/hashcat
  apt install p7zip
  7zr x "$LOCAL_OPT/hashcat.7z"
  mv "$LOCAL_OPT/hashcat-$VERSION" "$LOCAL_OPT/hashcat"
  rm "$LOCAL_OPT/hashcat.7z"
  ln -s "$LOCAL_OPT/hashcat/hashcat.bin" "$LOCAL_BIN/hashcat"
}

function utils {
  URL="https://github.com/hashcat/hashcat-utils.git"
  git clone --depth 1 $URL "$LOCAL_OPT/hashcat-utils"
  cd "$LOCAL_OPT/hashcat-utils/src" && make
  ln -s "$LOCAL_OPT/hashcat-utils/src/cap2hccapx.bin" "$LOCAL_BIN/cap2hccapx"
}

run
