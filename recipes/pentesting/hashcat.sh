#!/usr/bin/env bash

function run {
  VERSION="6.2.5"
  URL="https://hashcat.net/files/hashcat-$VERSION.7z"
  wget $URL -O "$MASHINA_OPT/hashcat.7z"
  rm -rf $MASHINA_OPT/hashcat
  apt install p7zip
  7zr x "$MASHINA_OPT/hashcat.7z"
  mv "$MASHINA_OPT/hashcat-$VERSION" "$MASHINA_OPT/hashcat"
  rm "$MASHINA_OPT/hashcat.7z"
  ln -s "$MASHINA_OPT/hashcat/hashcat.bin" "$MASHINA_BIN/hashcat"
}

function utils {
  URL="https://github.com/hashcat/hashcat-utils.git"
  git clone --depth 1 $URL "$MASHINA_OPT/hashcat-utils"
  cd "$MASHINA_OPT/hashcat-utils/src" && make
  ln -s "$MASHINA_OPT/hashcat-utils/src/cap2hccapx.bin" "$MASHINA_BIN/cap2hccapx"
}

run
